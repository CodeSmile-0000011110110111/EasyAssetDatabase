<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CodeSmile AssetDatabase: CodeSmile AssetDatabase</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="steffen portrait codesmile logo larger top-left-64x62.png"/></td>
  <td id="projectalign">
   <div id="projectname">CodeSmile AssetDatabase<span id="projectnumber">&#160;1.5</span>
   </div>
   <div id="projectbrief">Improved AssetDatabase API</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title"><a class="el" href="namespace_code_smile.html">CodeSmile</a> AssetDatabase </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__c_1_2_users_2_code_smile_2_projects_2de_8codesmile_8editor_8assetdatabase_2_r_e_a_d_m_e"></a> It's Unity's AssetDatabase except now it's clean, concise, consistent and powerful.</p>
<h1><a class="anchor" id="examples"></a>
Examples</h1>
<p>My name is <a class="el" href="namespace_code_smile.html">CodeSmile</a> for a reason. Read on. :)</p>
<h2><a class="anchor" id="load-or-create-asset"></a>
Load or create asset</h2>
<p>A common use case: if an asset cannot be loaded, create it. That only slightly complicates things with the AssetDatabase:</p>
<div class="fragment"><div class="line">public static LevelData GetLevelDataAsset(int level)</div>
<div class="line">{</div>
<div class="line">  string assetPath = &quot;Assets/DataStore/Level{level}/LevelData.asset&quot;;</div>
<div class="line"> </div>
<div class="line">  var levelData = AssetDatabase.LoadAssetAtPath&lt;LevelData&gt;(assetPath);</div>
<div class="line">  if (levelData == null)</div>
<div class="line">  {</div>
<div class="line">    // create datastore folder if not exists</div>
<div class="line">    if (!AssetDatabase.IsValidFolder(@&quot;Assets/DataStore&quot;))</div>
<div class="line">      AssetDatabase.CreateFolder(&quot;Assets&quot;, &quot;DataStore&quot;);</div>
<div class="line"> </div>
<div class="line">    // create level folder if not exists</div>
<div class="line">    if (!AssetDatabase.IsValidFolder(@&quot;Assets/DataStore/Level{level}&quot;))</div>
<div class="line">      AssetDatabase.CreateFolder(&quot;Assets/DataStore&quot;, &quot;Level{level}&quot;);</div>
<div class="line"> </div>
<div class="line">    levelData = CreateInstance&lt;LevelData&gt;();</div>
<div class="line">    AssetDatabase.CreateAsset(levelData, assetPath);</div>
<div class="line">  }</div>
<div class="line">  </div>
<div class="line">  return levelData;</div>
<div class="line">}</div>
</div><!-- fragment --><p>Now what used to be 20+ lines of code is just this:</p>
<div class="fragment"><div class="line">public static LevelData GetLevelDataAsset(int level)</div>
<div class="line">{</div>
<div class="line">    string assetPath = &quot;Assets/DataStore/Level{level}/LevelData.asset&quot;;</div>
<div class="line">    return Asset.LoadOrCreate&lt;LevelData&gt;(assetPath, () =&gt; CreateInstance&lt;LevelData&gt;());</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="load-an-asset"></a>
Load an asset</h2>
<p>Easy:</p>
<p><code>Asset levelData = "Assets/Example/LevelData.asset";</code></p>
<p>Wait .. wut?? :)</p>
<p>I see, you have a GUID? In that case:</p>
<p><code>Asset levelData = thisIsYourGuid;</code></p>
<p>Or if you already have an instance loaded:</p>
<p><code>Asset levelData = yourAssetObject;</code></p>
<p>The opposite also works, of course:</p>
<p><code>UnityEngine.Object obj = asset;</code></p>
<p>Not the right type? Just cast it:</p>
<p><code>var levelData = (LevelData)asset;</code></p>
<p>The Asset instance provides you access to everything you might want to do with an asset. Save, copy, rename, delete, you name it.</p>
<p>You also get an asset's Labels, GUID, FileId, path, .meta path and so on. It's right where you expect it.</p>
<h2><a class="anchor" id="get-an-assets-path"></a>
Get an asset's path</h2>
<p>Assuming you have an <code>asset</code> instance:</p>
<p><code>var assetPath = asset.AssetPath;</code></p>
<p>Oh right, you need the meta file path? Well, you could inquire the AssetDatabase:</p>
<p><code>var metaPath = AssetDatabase.GetTextMetaFilePathFromAssetPath(assetPath);</code></p>
<p>But I'd much rather have you do this:</p>
<p><code>var metaPath = asset.MetaPath;</code></p>
<p>Or if you just need to work with just paths:</p>
<div class="fragment"><div class="line">Path assetPath = &quot;Assets/Folder/LevelData.asset&quot;;</div>
<div class="line">Path metaPath = assetPath.MetaPath;</div>
</div><!-- fragment --><p>The secret sauce behind Asset.Path is that you never EVER need to worry about the path being malformed, containing illegal characters, mixing forward with backward slashes, or leaving leading/trailing slashes.</p>
<p>Asset.Path also gives access to commonly used System.IO.Path functionality:</p>
<div class="fragment"><div class="line">Path assetPath = &quot;Assets/Folder/LevelData.asset&quot;;</div>
<div class="line">Path assetDir = assetPath.DirectoryPath;</div>
<div class="line">String assetFileName = assetPath.FileName;</div>
<div class="line">String assetFileNameNoExt = assetPath.FileNameWithoutExtension;</div>
<div class="line">String assetExtension = assetPath.Extension;</div>
</div><!-- fragment --><h2><a class="anchor" id="be-nice-be-concise"></a>
Be nice, be concise!</h2>
<p>Thus far you were forced to write rather verbose, convoluted code. This package will improve your work-smile balance. :)</p>
<hr  />
<p><code>string[] paths = AssetDatabase.GetAssetPathsFromAssetBundleAndAssetName(bundleName, assetName);</code></p>
<p><code>string[] paths = Asset.Bundle.GetPaths(bundleName, assetName);</code></p>
<hr  />
<p><code>uint count = AssetDatabase.UnregisterCustomDependencyPrefixFilter(prefix);</code></p>
<p><code>uint count = Asset.Dependency.Remove(prefix);</code></p>
<hr  />
<p><code>var metaPath = AssetDatabase.GetTextMetaFilePathFromAssetPath(assetPath);</code></p>
<p><code>var metaPath = Asset.Path.ToMeta(assetPath);</code></p>
<h1><a class="anchor" id="documentation"></a>
Documentation</h1>
<p><a href="https://codesmile-0000011110110111.github.io/de.codesmile.editor.assetdatabase/html/index.html" target="_blank">Manual + API Reference</a></p>
<p><a href="https://docs.google.com/spreadsheets/d/134BEPXTx3z80snNAF3Gafgq3j5kEhmFzFBKT_z1s6Rw/edit?usp=sharing" target="_blank">AssetDatabase to CodeSmile AssetDatabase</a> This is a spreadsheet that maps all AssetDatabase methods to their counterpart. Notice the logical grouping and simple, consistent naming scheme.</p>
<h1><a class="anchor" id="requirements"></a>
Requirements</h1>
<ul>
<li>Unity 2021.3.3f1 or newer</li>
<li>A smile :)</li>
</ul>
<h1><a class="anchor" id="installation"></a>
Installation</h1>
<p>This software is a Unity Package Manager 'npm package'.</p>
<ul>
<li>Open Window =&gt; Package Manager in Unity Editor</li>
<li>Choose "Install package from git URL..."</li>
<li>Enter this URL: <code><a href="https://github.com/CodeSmile-0000011110110111/de.codesmile.editor.assetdatabase.git">https://github.com/CodeSmile-0000011110110111/de.codesmile.editor.assetdatabase.git</a></code></li>
</ul>
<p>This package is currently not available on OpenUPM.</p>
<h1><a class="anchor" id="gpl-license"></a>
GPL License</h1>
<p>This software is licensed under the GNU General Public License v3.0 (GPL 3.0). The main implication is that any work you publish that uses this software requires the entire work to be published as open source software under the same GPL 3.0 license.</p>
<p>This software will also be available on the Unity Asset Store under the Asset Store EULA.</p>
<p>If you wish to license this software under different terms, for example to create Asset Store tools, please contact me!</p>
<ul>
<li>Steffen aka <a class="el" href="namespace_code_smile.html">CodeSmile</a></li>
<li><a href="mailto:steffen@steffenitterheim.de">Email</a> / <a href="https://discord.gg/JN3Jz8qkeV" target="_blank">Discord</a></li>
</ul>
<h1><a class="anchor" id="support--feeback"></a>
Support &amp; Feeback</h1>
<p>Very welcome! Please prefer to create an issue in the GitHub repository, specifically if you encounter issues or to request a feature. Contact me directly (see above) for any other feedback and questions. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
